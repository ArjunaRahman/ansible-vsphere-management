---
keepalived_config: true
keepalived_router_info:
  - name: vrrp_1
    # check_script:
    #   - name: chk_haproxy
    #     script: 'killall -0 haproxy'
    #     interval: 2
    #     weight: 2
    # Define inventory_hostname of node to be considered Master
    master_node: "{{ groups['vsphere_powerdns_vms'][0] }}"
    router_id: 50
    router_pri_backup: 100
    router_pri_master: 150
    vip_int: "{{ ansible_primary_interface }}"
    vip_addresses:
      - "{{ vsphere_dns_vips[0] }}"
      - "{{ vsphere_ntp_vips[0] }}"
  - name: vrrp_2
    # check_script:
    #   - name: chk_nginx
    #     script: 'pidof nginx'
    #     interval: 2
    #     weight: 2
    master_node: "{{ groups['vsphere_powerdns_vms'][1] }}"
    router_id: 51
    router_pri_backup: 100
    router_pri_master: 150
    vip_int: "{{ ansible_primary_interface }}"
    vip_addresses:
      - "{{ vsphere_dns_vips[1] }}"
      - "{{ vsphere_ntp_vips[1] }}"
